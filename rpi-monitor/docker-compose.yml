version: '3'
networks:
  default:
    external:
      name: traefik
#
services:
  rpi-monitor:
    container_name: rpi-monitor
    image: michaelmiklis/rpi-monitor:latest
    volumes:
      - $PWD/vc:/opt/vc
      - /boot:/boot
      - /sys:/dockerhost/sys:ro
      - /etc:/dockerhost/etc:ro
      - /proc:/dockerhost/proc:ro
      - /usr/lib:/dockerhost/usr/lib:ro
    devices:
      - "/dev/vchiq:/dev/vchiq" 
      - "/dev/vcsm:/dev/vcsm"  
#    restart: unless-stopped
#    ports:
#      - 8888:8888
    labels:
      - traefik.backend=rpimonitor
      - traefik.frontend.rule=Host:rpimonitor.nerdseverino.local
      - traefik.port=8888
      - "traefik.http.routers.rpimonitor.rule=Host(`rpimonitor.nerdseverino.local`)"
#
